<controls:WindowEx x:Class="UVtools.UI.Windows.SettingsWindow"
                   xmlns="https://github.com/avaloniaui"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:controls="clr-namespace:UVtools.UI.Controls"
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                   xmlns:i="https://github.com/projektanker/icons.avalonia"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                   xmlns:system="clr-namespace:System;assembly=System.Runtime"
                   xmlns:uvtava="clr-namespace:UVtools.AvaloniaControls;assembly=UVtools.AvaloniaControls"
                   xmlns:windows="clr-namespace:UVtools.UI.Windows"
                   Title="UVtools - Settings"
                   Width="780"
                   MinWidth="600"
                   d:DesignHeight="650"
                   d:DesignWidth="780"
                   x:DataType="windows:SettingsWindow"
                   CanResize="False"
                   Icon="/Assets/Icons/UVtools.ico"
                   SizeToContent="Height"
                   WindowStartupLocation="CenterOwner"
                   mc:Ignorable="d">
    <Grid RowDefinitions="*,84">
        <TabControl SelectedIndex="{Binding SelectedTabIndex}">
            <TabItem VerticalContentAlignment="Center"
                     Header="General">
                <ScrollViewer Name="ScrollViewer0">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Startup">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">

                                <StackPanel Orientation="Horizontal"
                                            Spacing="10">
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Theme:" />
                                    <ComboBox Width="150"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.General.Theme, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.General.Theme, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                    <TextBlock Margin="10,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Density:" />
                                    <ComboBox Width="150"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.General.ThemeDensity, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.General.ThemeDensity, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                </StackPanel>

                                <StackPanel Orientation="Horizontal"
                                            Spacing="20">
                                    <CheckBox Content="Start maximized"
                                              IsChecked="{Binding Settings.General.StartMaximized}"
                                              ToolTip.Tip="If enabled, the main window will show up maximized" />

                                    <CheckBox Content="Restore window last position"
                                              IsChecked="{Binding Settings.General.RestoreWindowLastPosition}"
                                              ToolTip.Tip="If enabled, it will restore the main window last known client position on startup" />

                                    <CheckBox Content="Restore window last size"
                                              IsChecked="{Binding Settings.General.RestoreWindowLastSize}"
                                              ToolTip.Tip="If enabled, it will restore the main window last known client size on startup" />
                                </StackPanel>
                                <CheckBox Content="Check for updates on startup"
                                          IsChecked="{Binding Settings.General.CheckForUpdatesOnStartup}" />
                                <CheckBox Content="Loads a demo file on startup if no file was specified"
                                          IsChecked="{Binding Settings.General.LoadDemoFileOnStartup}" />
                                <CheckBox Content="Loads the last recent file on startup if no file was specified"
                                          IsChecked="{Binding Settings.General.LoadLastRecentFileOnStartup}" />
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="Tasks">

                            <StackPanel Spacing="10">
                                <Grid ColumnDefinitions="Auto,10,180,5,Auto,10,Auto,2,Auto,2,Auto,2,Auto,2,Auto,2,Auto,2,Auto"
                                      RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                                      RowSpacing="10">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Available RAM lower limit:"
                                               ToolTip.Tip="Sets a lower limiter for the available memory RAM the program is allowed to run operations. &#x0a;When meet the threshold, a stopping action will be queued to relief pressure and maintain the system stability. &#x0a;In cases where is unable to pause or cancel the operation, the program will be forced to close and trigger an exception to ensure the system stability. &#x0a;&#x0a;Note: This limiter will check the RAM every 2 seconds while operations are running, if you have set a very low limit there is a chance to consume more RAM in the time and cause system instability. &#x0a;System can also reserve some RAM to prevent depletion and start to use SWAP memory, doing such with a low limit and is possible that the limiter never trigger. &#x0a;&#x0a;0: Ignore the RAM limiter." />

                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_GB"
                                                   FormatString="F2"
                                                   Increment="0.5"
                                                   Maximum="100"
                                                   Minimum="0"
                                                   ToolTip.Tip="Sets a lower limiter for the available memory RAM the program is allowed to run operations. &#x0a;When meet the threshold, a stopping action will be queued to relief pressure and maintain the system stability. &#x0a;In cases where is unable to pause or cancel the operation, the program will be forced to close and trigger an exception to ensure the system stability. &#x0a;&#x0a;Note: This limiter will check the RAM every 2 seconds while operations are running, if you have set a very low limit there is a chance to consume more RAM in the time and cause system instability. &#x0a;System can also reserve some RAM to prevent depletion and start to use SWAP memory, doing such with a low limit and is possible that the limiter never trigger. &#x0a;&#x0a;0: Ignore the RAM limiter."
                                                   Value="{Binding Settings.General.AvailableRamLimit}" />

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Hit action:"
                                               ToolTip.Tip="Action to perform when the available RAM limiter triggers." />

                                    <ComboBox Grid.Row="0"
                                              Grid.Column="6"
                                              Grid.ColumnSpan="13"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Center"
                                              ItemsSource="{Binding Settings.General.AvailableRamOnHitLimitAction, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.General.AvailableRamOnHitLimitAction, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                    <TextBlock Grid.Row="1"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="When unable to hit action:" />

                                    <ToggleSwitch Grid.Row="1"
                                                  Grid.Column="2"
                                                  Grid.ColumnSpan="17"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Settings.General.AvailableRamOnHitLimitKillIfUnableToAction}"
                                                  OffContent="Try to continue if unable to pause or cancel the operation."
                                                  OnContent="Kill the process if unable to pause or cancel the operation." />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Max degree of parallelism:"
                                               ToolTip.Tip="Sets the maximum number of concurrent tasks/threads/operations enabled to run by parallel method calls. &#x0a;If your computer lags and freezes during operations you can reduce this number to reduce the workload and keep some cores available to other tasks as well. &#x0a;-2: Will utilize an optimal number in order to relief some load and therefore preventing the computer from lags and freezes, mostly this is the processor core count less a few. The more cores the CPU haves the larger is the margin up to a limit. (Optimal/Recommended) &#x0a;-1: Will utilize however many threads the underlying scheduler provides, mostly this is the processor core count. (Fast/Performance) &#x0a;0: Will utilize the processor core count. (Fast/Performance) &#x0a;1: Single thread. (Slowest)" />

                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Increment="1"
                                                   Maximum="{Binding Source={x:Static system:Environment.ProcessorCount}}"
                                                   Minimum="-2"
                                                   ToolTip.Tip="Sets the maximum number of concurrent tasks/threads/operations enabled to run by parallel method calls. &#x0a;If your computer lags and freezes during operations you can reduce this number to reduce the workload and keep some cores available to other tasks as well. &#x0a;-2: Will utilize an optimal number in order to relief some load and therefore preventing the computer from lags and freezes, mostly this is the processor core count less a few. The more cores the CPU haves the larger is the margin up to a limit. (Optimal/Recommended) &#x0a;-1: Will utilize however many threads the underlying scheduler provides, mostly this is the processor core count. (Fast/Performance) &#x0a;0: Will utilize the processor core count. (Fast/Performance) &#x0a;1: Single thread. (Slow)"
                                                   Value="{Binding Settings.General.MaxDegreeOfParallelism}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="4"
                                               VerticalAlignment="Center"
                                               Text="{Binding Source={x:Static system:Environment.ProcessorCount}, StringFormat=/ {0} threads}" />

                                    <DropDownButton Grid.Row="2"
                                                    Grid.Column="6"
                                                    Content="Auto">
                                        <DropDownButton.Flyout>
                                            <MenuFlyout>
                                                <MenuItem Command="{Binding SetMaxDegreeOfParallelism}"
                                                          CommandParameter="-2"
                                                          Header="Auto-optimal number (Optimal/Recommended)"
                                                          ToolTip.Tip="Will utilize an optimal number in order to relief some load and therefore preventing the computer from lags and freezes, mostly this is the processor core count less a few. The more cores the CPU haves the larger is the margin up to a limit. (Optimal/Recommended)" />
                                                <MenuItem Command="{Binding SetMaxDegreeOfParallelism}"
                                                          CommandParameter="-1"
                                                          Header="Framework scheduler (Fastest/Performance)"
                                                          ToolTip.Tip="Will utilize however many threads the underlying scheduler provides, mostly this is the processor core count. (Fast/Performance)" />
                                                <MenuItem Command="{Binding SetMaxDegreeOfParallelism}"
                                                          CommandParameter="0"
                                                          Header="Processor core count (Fastest/Performance)"
                                                          ToolTip.Tip="Will utilize the processor core count. (Fast/Performance)" />
                                            </MenuFlyout>
                                        </DropDownButton.Flyout>
                                    </DropDownButton>

                                    <!--
                                    <Button Grid.Row="0" Grid.Column="6"
                                            VerticalAlignment="Center"
                                            Content="Auto"
                                            ToolTip.Tip="Will utilize however many threads the underlying scheduler provides (Full performance)"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="-1"/>
                                    !-->

                                    <Button Grid.Row="2"
                                            Grid.Column="8"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="1"
                                            Content="1"
                                            ToolTip.Tip="Single thread (Very slow performance)" />

                                    <Button Grid.Row="2"
                                            Grid.Column="10"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="0.25"
                                            Content="¼"
                                            ToolTip.Tip="A quarter of the available threads (Slow performance)" />

                                    <Button Grid.Row="2"
                                            Grid.Column="12"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="0.5"
                                            Content="½"
                                            ToolTip.Tip="Half of the available threads (Half performance)" />

                                    <Button Grid.Row="2"
                                            Grid.Column="14"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="0.75"
                                            Content="¾"
                                            ToolTip.Tip="Three quarters of the available threads (Fast performance)" />

                                    <Button Grid.Row="2"
                                            Grid.Column="16"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="!"
                                            Content="!"
                                            ToolTip.Tip="Optimal of the available threads, this is your thread count less 2 to relief the workload and leave 2 cores free for other running tasks (Optimal performance)" />

                                    <Button Grid.Row="2"
                                            Grid.Column="18"
                                            VerticalAlignment="Center"
                                            Command="{Binding SetMaxDegreeOfParallelism}"
                                            CommandParameter="{Binding Source={x:Static system:Environment.ProcessorCount}}"
                                            Content="Max"
                                            ToolTip.Tip="{Binding Source={x:Static system:Environment.ProcessorCount}, StringFormat=All the available threads [{0}] (Full performance)}" />

                                    <TextBlock Grid.Row="3"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Layer compression codec:"
                                               ToolTip.Tip="Sets the compression codec used to store the layer image cache. &#x0a;The selected method will impact RAM usage and operations speed." />

                                    <ComboBox Grid.Row="3"
                                              Grid.Column="2"
                                              Grid.ColumnSpan="17"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Center"
                                              ItemsSource="{Binding Settings.General.LayerCompressionCodec, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.General.LayerCompressionCodec, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Average resin bottle cost:"
                                               ToolTip.Tip="The average cost per one resin bottle of 1000ml. &#x0a;Used to calculate the material cost when the file lacks that information. &#x0a;Use 0 to disable this feature and only show the cost if file have that information. &#x0a;If this value is changed, you need to reload the current file to update the cost." />

                                    <NumericUpDown Grid.Row="4"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_euro"
                                                   Increment="1"
                                                   Maximum="10000"
                                                   Minimum="0"
                                                   ToolTip.Tip="The average cost per one resin bottle of 1000ml. &#x0a;Used to calculate the material cost when the file lacks that information. &#x0a;Use 0 to disable this feature and only show the cost if file have that information. &#x0a;If this value is changed, you need to reload the current file to update the cost."
                                                   Value="{Binding Settings.General.AverageResin1000MlBottleCost}" />
                                    <TextBlock Grid.Row="4"
                                               Grid.Column="4"
                                               Grid.ColumnSpan="15"
                                               VerticalAlignment="Center"
                                               Text="/ 1000ml bottle" />
                                </Grid>
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="Windows / dialogs">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">

                                <CheckBox Content="Allow to resize the tool windows"
                                          IsChecked="{Binding Settings.General.WindowsCanResize}"
                                          ToolTip.Tip="Check this option if you have problems with content being cut on some windows, down-size the height by a bit and then expand to fix the content." />

                                <CheckBox Content="Take into account the screen scale factor to limit the dialogs windows maximum size"
                                          IsChecked="{Binding Settings.General.WindowsTakeIntoAccountScreenScaling}" />


                                <Grid ColumnDefinitions="Auto,10,Auto"
                                      RowDefinitions="Auto,10,Auto">

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Horizontal limiting margin:"
                                               ToolTip.Tip="Limits the windows and dialogs maximum width to the screen resolution less this margin" />

                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Increment="1"
                                                   Maximum="1000"
                                                   Minimum="0"
                                                   ToolTip.Tip="Limits the windows and dialogs maximum width to the screen resolution less this margin"
                                                   Value="{Binding Settings.General.WindowsHorizontalMargin}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Vertical limiting margin:"
                                               ToolTip.Tip="Limits windows and dialogs maximum height to the screen resolution less this margin" />

                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Increment="1"
                                                   Maximum="1000"
                                                   Minimum="0"
                                                   ToolTip.Tip="Limits windows and dialogs maximum height to the screen resolution less this margin"
                                                   Value="{Binding Settings.General.WindowsVerticalMargin}" />
                                </Grid>
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="File dialog">

                            <StackPanel Spacing="10">

                                <Grid ColumnDefinitions="Auto,10,*,Auto,Auto"
                                      RowDefinitions="Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File open dialog filters:" />
                                    <ComboBox Grid.Row="0"
                                              Grid.Column="2"
                                              Grid.ColumnSpan="3"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding FileOpenDialogFilters}"
                                              MaxDropDownHeight="350"
                                              SelectedIndex="{Binding Settings.General.DefaultOpenFileExtensionIndex}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File open default directory:" />
                                    <TextBox Grid.Row="2"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.General.DefaultDirectoryOpenFile}" />
                                    <Button Grid.Row="2"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-folder"
                                            Command="{Binding GeneralOpenFolderField}"
                                            CommandParameter="DefaultDirectoryOpenFile" />
                                    <Button Grid.Row="2"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding GeneralClearField}"
                                            CommandParameter="DefaultDirectoryOpenFile" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File save as default directory:" />
                                    <TextBox Grid.Row="4"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.General.DefaultDirectorySaveFile}" />
                                    <Button Grid.Row="4"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-folder"
                                            Command="{Binding GeneralOpenFolderField}"
                                            CommandParameter="DefaultDirectorySaveFile" />
                                    <Button Grid.Row="4"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding GeneralClearField}"
                                            CommandParameter="DefaultDirectorySaveFile" />


                                    <TextBlock Grid.Row="6"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File extract default directory:" />
                                    <TextBox Grid.Row="6"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.General.DefaultDirectoryExtractFile}" />
                                    <Button Grid.Row="6"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-folder"
                                            Command="{Binding GeneralOpenFolderField}"
                                            CommandParameter="DefaultDirectoryExtractFile" />
                                    <Button Grid.Row="6"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding GeneralClearField}"
                                            CommandParameter="DefaultDirectoryExtractFile" />

                                    <TextBlock Grid.Row="8"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File convert default directory:" />
                                    <TextBox Grid.Row="8"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.General.DefaultDirectoryConvertFile}" />
                                    <Button Grid.Row="8"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-folder"
                                            Command="{Binding GeneralOpenFolderField}"
                                            CommandParameter="DefaultDirectoryConvertFile" />
                                    <Button Grid.Row="8"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding GeneralClearField}"
                                            CommandParameter="DefaultDirectoryConvertFile" />

                                    <TextBlock Grid.Row="10"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Scripts default directory:" />
                                    <TextBox Grid.Row="10"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.General.DefaultDirectoryScripts}" />
                                    <Button Grid.Row="10"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-folder"
                                            Command="{Binding GeneralOpenFolderField}"
                                            CommandParameter="DefaultDirectoryScripts" />
                                    <Button Grid.Row="10"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding GeneralClearField}"
                                            CommandParameter="DefaultDirectoryScripts" />

                                </Grid>

                                <CheckBox Content="Before save the file for the first time prompt if you want to overwrite the original file"
                                          IsChecked="{Binding Settings.General.FileSavePromptOverwrite}" />
                                <CheckBox Content="After save the file replace on it name with the updated print time and material if possible"
                                          IsChecked="{Binding Settings.General.FileSaveUpdateNameWithNewInformation}"
                                          ToolTip.Tip="Whatever possible if the current file name have print time and material milliliters information, replace those with the actual values." />

                                <Grid ColumnDefinitions="Auto,10,*"
                                      RowDefinitions="Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File 'Save as' default name:"
                                               ToolTip.Tip="File name to show on file save dialog by default. &#x0a;{0} = Current file name. &#x0a;{VarName} = Fetch variable from FileFormat and replace by it value." />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="2"
                                             Text="{Binding Settings.General.FileSaveAsDefaultName}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="File 'Save as' name cleanup regex:"
                                               ToolTip.Tip="From a regex expression, replaces the found occurrences with an empty string. &#x0a;Use this to cleanup the file name from repeated patterns resulted from save a copy of a copy." />
                                    <TextBox Grid.Row="2"
                                             Grid.Column="2"
                                             Text="{Binding Settings.General.FileSaveAsDefaultNameCleanUpRegex}" />
                                </Grid>
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="Notifications">

                            <StackPanel Spacing="10">

                                <StackPanel Orientation="Horizontal"
                                            Spacing="5">
                                    <CheckBox VerticalAlignment="Center"
                                              Content="Play"
                                              IsChecked="{Binding Settings.General.NotificationBeep}" />
                                    <NumericUpDown Width="130"
                                                   VerticalAlignment="Center"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="255"
                                                   Minimum="1"
                                                   Value="{Binding Settings.General.NotificationBeepCount}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="beep(s) when finish operations that ran longer than" />
                                    <NumericUpDown Width="190"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_s"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="65535"
                                                   Minimum="10"
                                                   Value="{Binding Settings.General.NotificationBeepActivateAboveTime}" />
                                </StackPanel>

                                <Grid ColumnDefinitions="Auto,10,*,20,Auto,10,*"
                                      RowDefinitions="Auto,10,Auto">

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Beep frequency:" />
                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_hz"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="20000"
                                                   Minimum="20"
                                                   Value="{Binding Settings.General.NotificationBeepFrequency}" />
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="4"
                                               VerticalAlignment="Center"
                                               Text="Beep duration:" />
                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="6"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_ms"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="5000"
                                                   Minimum="50"
                                                   Value="{Binding Settings.General.NotificationBeepDuration}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Repeat offset:" />
                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="2"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_hz"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="10000"
                                                   Minimum="0"
                                                   Value="{Binding Settings.General.NotificationBeepRepeatFrequencyOffset}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="4"
                                               VerticalAlignment="Center"
                                               Text="Repeat delay:" />
                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="6"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_ms"
                                                   IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                   Maximum="5000"
                                                   Minimum="0"
                                                   Value="{Binding Settings.General.NotificationBeepRepeatDelay}" />
                                </Grid>
                                <controls:ButtonWithIcon Padding="20,10,20,10"
                                                         Command="{Binding PlayBeep}"
                                                         Icon="fa-solid fa-play"
                                                         IsEnabled="{Binding Settings.General.NotificationBeep}"
                                                         Text="Play beep" />
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5">
                            <uvtava:GroupBox.Header>
                                <Grid ColumnDefinitions="*,Auto"
                                      RowDefinitions="Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Send to - Custom location" />

                                    <StackPanel Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                Orientation="Horizontal"
                                                Spacing="2">
                                        <Button VerticalAlignment="Center"
                                                i:Attached.Icon="fa-solid fa-plus"
                                                Command="{Binding SendToAddCustomLocation}"
                                                ToolTip.Tip="Add location" />

                                        <Button VerticalAlignment="Center"
                                                i:Attached.Icon="fa-solid fa-trash-alt"
                                                Command="{Binding SendToRemoveCustomLocations}"
                                                IsEnabled="{Binding #SendToCustomLocationsGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"
                                                ToolTip.Tip="Remove selected locations" />
                                    </StackPanel>

                                </Grid>
                            </uvtava:GroupBox.Header>

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">

                                <CheckBox Content="When send to a removable device, prompt for device ejection after copied [Windows only]"
                                          IsChecked="{Binding Settings.General.SendToPromptForRemovableDeviceEject}" />

                                <DataGrid Name="SendToCustomLocationsGrid"
                                          MinHeight="100"
                                          CanUserReorderColumns="True"
                                          CanUserResizeColumns="True"
                                          CanUserSortColumns="True"
                                          ClipboardCopyMode="IncludeHeader"
                                          GridLinesVisibility="Horizontal"
                                          IsReadOnly="False"
                                          ItemsSource="{Binding Settings.General.SendToCustomLocations}"
                                          SelectionMode="Extended">
                                    <DataGrid.Columns>
                                        <DataGridCheckBoxColumn Width="Auto"
                                                                Binding="{Binding IsEnabled}"
                                                                Header="Enabled"
                                                                IsReadOnly="False" />
                                        <DataGridTextColumn Width="*"
                                                            Binding="{Binding Path}"
                                                            Header="Path"
                                                            IsReadOnly="True" />
                                        <DataGridTextColumn Width="200"
                                                            Binding="{Binding Name}"
                                                            Header="Alias name"
                                                            IsReadOnly="False" />
                                        <DataGridTextColumn Width="150"
                                                            Binding="{Binding CompatibleExtensions}"
                                                            Header="Extensions"
                                                            IsReadOnly="False" />
                                    </DataGrid.Columns>

                                </DataGrid>
                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         ContentMargin="0">
                            <uvtava:GroupBox.Header>
                                <Grid ColumnDefinitions="*,Auto"
                                      RowDefinitions="Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               Text="Send to - Process"
                                               ToolTip.Tip="Allow to open a new process with arguments and pass the current file.&#x0a; &#x0a;Wait exit: Interrupt the UI and wait for process completion/exit. &#x0a;Arguments: Use &quot;{0}&quot; to indicate the current loaded file path, when empty, it will pass  &quot;{0}&quot; by default." />

                                    <StackPanel Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                Orientation="Horizontal"
                                                Spacing="2">
                                        <Button VerticalAlignment="Center"
                                                i:Attached.Icon="fa-solid fa-plus"
                                                Command="{Binding SendToAddProcess}"
                                                ToolTip.Tip="Add location" />

                                        <Button VerticalAlignment="Center"
                                                i:Attached.Icon="fa-solid fa-trash-alt"
                                                Command="{Binding SendToRemoveProcess}"
                                                IsEnabled="{Binding #SendToProcessGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"
                                                ToolTip.Tip="Remove selected process(es)" />
                                    </StackPanel>

                                </Grid>
                            </uvtava:GroupBox.Header>

                            <DataGrid Name="SendToProcessGrid"
                                      MinHeight="100"
                                      CanUserReorderColumns="True"
                                      CanUserResizeColumns="True"
                                      CanUserSortColumns="True"
                                      ClipboardCopyMode="IncludeHeader"
                                      GridLinesVisibility="Horizontal"
                                      IsReadOnly="False"
                                      ItemsSource="{Binding Settings.General.SendToProcess}"
                                      SelectionMode="Extended">
                                <DataGrid.Columns>
                                    <DataGridCheckBoxColumn Width="Auto"
                                                            Binding="{Binding IsEnabled}"
                                                            Header="Enabled"
                                                            IsReadOnly="False" />
                                    <DataGridCheckBoxColumn Width="Auto"
                                                            Binding="{Binding WaitForExit}"
                                                            Header="Wait exit"
                                                            IsReadOnly="False" />
                                    <DataGridTextColumn Width="150"
                                                        Binding="{Binding Name}"
                                                        Header="Alias name"
                                                        IsReadOnly="False" />
                                    <DataGridTextColumn Width="*"
                                                        Binding="{Binding ApplicationPath}"
                                                        Header="Process path"
                                                        IsReadOnly="True" />
                                    <DataGridTextColumn Width="110"
                                                        Binding="{Binding Arguments}"
                                                        Header="Arguments"
                                                        IsReadOnly="False" />
                                    <DataGridTextColumn Width="150"
                                                        Binding="{Binding CompatibleExtensions}"
                                                        Header="Extensions"
                                                        IsReadOnly="False" />
                                </DataGrid.Columns>

                            </DataGrid>
                        </uvtava:GroupBox>

                    </StackPanel>
                </ScrollViewer>

            </TabItem>
            <TabItem VerticalContentAlignment="Center"
                     Header="Layer preview">
                <ScrollViewer Name="ScrollViewer1">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Layer colors">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*"
                                      RowDefinitions="Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto">

                                    <!--  Tooltip overlay  -->
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Tooltip overlay:" />
                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.TooltipOverlayBackgroundBrush}" />
                                    <CheckBox Grid.Row="0"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.TooltipOverlay}" />


                                    <!--  Print volume boundary  -->
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Print volume boundary:" />
                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.VolumeBoundsOutlineBrush}" />
                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.VolumeBoundsOutlineThickness}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness" />
                                    <CheckBox Grid.Row="2"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.VolumeBoundsOutline}" />

                                    <!--  Layer boundary  -->
                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Layer boundary:" />
                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.LayerBoundsOutlineBrush}" />
                                    <NumericUpDown Grid.Row="4"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.LayerBoundsOutlineThickness}" />
                                    <TextBlock Grid.Row="4"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness" />
                                    <CheckBox Grid.Row="4"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.LayerBoundsOutline}" />

                                    <!--  Blob boundary  -->
                                    <TextBlock Grid.Row="6"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Blob boundary:" />
                                    <ColorPicker Grid.Row="6"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.ContourBoundsOutlineBrush}" />
                                    <NumericUpDown Grid.Row="6"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.ContourBoundsOutlineThickness}" />
                                    <TextBlock Grid.Row="6"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness" />
                                    <CheckBox Grid.Row="6"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.ContourBoundsOutline}" />


                                    <!--  Enclosing Circles  -->
                                    <TextBlock Grid.Row="8"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Enclosing circles:" />
                                    <ColorPicker Grid.Row="8"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.EnclosingCirclesOutlineBrush}" />
                                    <NumericUpDown Grid.Row="8"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.EnclosingCirclesOutlineThickness}" />
                                    <TextBlock Grid.Row="8"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness" />
                                    <CheckBox Grid.Row="8"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.EnclosingCirclesOutline}" />

                                    <!--  Hollow area boundary  -->
                                    <TextBlock Grid.Row="10"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Hollow area outline:" />
                                    <ColorPicker Grid.Row="10"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.HollowOutlineBrush}" />
                                    <NumericUpDown Grid.Row="10"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="127"
                                                   Minimum="-1"
                                                   Value="{Binding Settings.LayerPreview.HollowOutlineLineThickness}" />
                                    <TextBlock Grid.Row="10"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness"
                                               ToolTip.Tip="Set -1 to fill the area" />
                                    <CheckBox Grid.Row="10"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Show by default"
                                              IsChecked="{Binding Settings.LayerPreview.HollowOutline}" />

                                    <!--  Centroids boundary  -->
                                    <TextBlock Grid.Row="12"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Centroids:" />
                                    <ColorPicker Grid.Row="12"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.CentroidOutlineBrush}" />
                                    <NumericUpDown Grid.Row="12"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.CentroidOutlineDiameter}" />
                                    <TextBlock Grid.Row="12"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Diameter" />

                                    <StackPanel Grid.Row="12"
                                                Grid.Column="3"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal"
                                                Spacing="10">
                                        <CheckBox Content="Hollow centroids"
                                                  IsChecked="{Binding Settings.LayerPreview.CentroidOutlineHollow}" />

                                        <CheckBox Content="Show by default"
                                                  IsChecked="{Binding Settings.LayerPreview.CentroidOutline}" />
                                    </StackPanel>

                                    <!--  Triangulate  -->
                                    <TextBlock Grid.Row="14"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Triangulate:" />
                                    <ColorPicker Grid.Row="14"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.TriangulateOutlineBrush}" />
                                    <NumericUpDown Grid.Row="14"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="50"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.TriangulateOutlineLineThickness}" />
                                    <TextBlock Grid.Row="14"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness" />

                                    <StackPanel Grid.Row="14"
                                                Grid.Column="3"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal"
                                                Spacing="10">
                                        <CheckBox Content="Show triangle count"
                                                  IsChecked="{Binding Settings.LayerPreview.TriangulateOutlineShowCount}" />
                                    </StackPanel>

                                    <!--  Masks  -->
                                    <TextBlock Grid.Row="16"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Mask area outline:" />
                                    <ColorPicker Grid.Row="16"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.MaskOutlineBrush}" />
                                    <NumericUpDown Grid.Row="16"
                                                   Grid.Column="2"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Maximum="127"
                                                   Minimum="-1"
                                                   Value="{Binding Settings.LayerPreview.MaskOutlineLineThickness}" />
                                    <TextBlock Grid.Row="16"
                                               Grid.Column="3"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"
                                               Text="Line thickness"
                                               ToolTip.Tip="Set -1 to fill the area" />
                                    <CheckBox Grid.Row="16"
                                              Grid.Column="4"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Right"
                                              VerticalAlignment="Center"
                                              Content="Clear ROI when adding masks"
                                              IsChecked="{Binding Settings.LayerPreview.MaskClearROIAfterSet}" />

                                </Grid>

                                <Grid ColumnDefinitions="Auto,Auto,*,Auto,Auto"
                                      RowDefinitions="Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto">

                                    <!--  Previous layer difference  & Island  -->
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Previous layer difference:" />
                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.PreviousLayerDifferenceBrush}" />
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Island / Selected island:" />
                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.IslandBrush}" />
                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="4"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.IslandHighlightBrush}" />

                                    <!--  Next layer difference  & Overhang  -->
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Next layer difference:" />
                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.NextLayerDifferenceBrush}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Overhang / Selected overhang:" />
                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.OverhangBrush}" />
                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="4"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.OverhangHighlightBrush}" />

                                    <!--  Next&prev layer difference & Resin traps  -->
                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Prev &amp; next layer difference:" />
                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.BothLayerDifferenceBrush}" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Resin trap / Selected Resin trap:" />
                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.ResinTrapBrush}" />
                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="4"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.ResinTrapHighlightBrush}" />

                                    <!--  Diff & suction cups  -->
                                    <CheckBox Grid.Row="6"
                                              Grid.Column="0"
                                              Grid.ColumnSpan="3"
                                              Content="Show layer difference by default"
                                              IsChecked="{Binding Settings.LayerPreview.ShowLayerDifference}" />

                                    <TextBlock Grid.Row="6"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Suction cup / Selected Suction cup:" />
                                    <ColorPicker Grid.Row="6"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.SuctionCupBrush}" />
                                    <ColorPicker Grid.Row="6"
                                                 Grid.Column="4"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.SuctionCupHighlightBrush}" />


                                    <!--  Diff & Touching bounds  -->

                                    <CheckBox Grid.Row="8"
                                              Grid.Column="0"
                                              Grid.ColumnSpan="3"
                                              Content="Show layer similarity instead of difference"
                                              IsChecked="{Binding Settings.LayerPreview.LayerDifferenceHighlightSimilarityInstead}"
                                              ToolTip.Tip="If enabled, it will recolor the current layer pixels in common with the previous and next layer" />

                                    <TextBlock Grid.Row="8"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Touching boundary:" />
                                    <ColorPicker Grid.Row="8"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.TouchingBoundsBrush}" />


                                    <!--  Crosshair  -->
                                    <CheckBox Grid.Row="10"
                                              Grid.Column="0"
                                              Grid.ColumnSpan="3"
                                              Content="Colorize the issue tracker map with it own colors"
                                              IsChecked="{Binding Settings.LayerPreview.UseIssueColorOnTracker}"
                                              ToolTip.Tip="Issue color priority: Islands->Overhangs->Resin traps->Suction cups. &#x0a;If disabled, red will be used to display each layer issue." />
                                    <TextBlock Grid.Row="10"
                                               Grid.Column="2"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Crosshair:" />
                                    <ColorPicker Grid.Row="10"
                                                 Grid.Column="3"
                                                 Margin="10,0,0,0"
                                                 VerticalAlignment="Center"
                                                 Color="{Binding Settings.LayerPreview.CrosshairBrush}" />
                                </Grid>
                            </StackPanel>


                        </uvtava:GroupBox>

                        <!--  Zoom  -->
                        <uvtava:GroupBox Margin="5"
                                         Header="Zoom">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <Grid ColumnDefinitions="Auto,Auto,*,180"
                                      RowDefinitions="Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Zoom behaviour:"
                                               ToolTip.Tip="The default zoom behaviour when using the mouse wheel. &#x0a;Hold Alt key to invert this option while zooming." />

                                    <ToggleSwitch Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="10,0,0,0"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Settings.LayerPreview.ZoomPreferNative}"
                                                  OffContent="Use pre-defined zoom levels"
                                                  OnContent="Use native incremental zoom" />

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Zoom debounce:"
                                               ToolTip.Tip="Debounce time required between zoom events to perform zoom." />
                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="3"
                                                   Margin="10,0,0,0"
                                                   Classes="ValueLabel ValueLabel_ms"
                                                   Maximum="1000"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerPreview.ZoomDebounceMilliseconds}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Zoom out to fit:" />

                                    <ComboBox Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Center"
                                              SelectedIndex="{Binding Settings.LayerPreview.ZoomToFitPrintVolumeBounds}">
                                        <ComboBox.Items>
                                            <ComboBoxItem Content="Print Volume Boundary" />
                                            <ComboBoxItem Content="Layer Boundary" />
                                        </ComboBox.Items>
                                    </ComboBox>

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Zoom in factor:" />

                                    <ComboBox Grid.Row="2"
                                              Grid.Column="3"
                                              Margin="10,0,0,0"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Center"
                                              ItemsSource="{Binding ZoomRanges}"
                                              SelectedIndex="{Binding Settings.LayerPreview.ZoomLockLevelIndex}" />

                                </Grid>

                                <CheckBox Content="Auto zoom &amp; center issues on selection"
                                          IsChecked="{Binding Settings.LayerPreview.ZoomIssues}" />
                            </StackPanel>

                        </uvtava:GroupBox>

                        <!--  Crosshairs  -->
                        <uvtava:GroupBox Margin="5"
                                         Header="Crosshairs">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <Grid ColumnDefinitions="Auto,150,*,Auto"
                                      RowDefinitions="Auto,10,Auto">
                                    <CheckBox Grid.Row="0"
                                              Grid.Column="0"
                                              Grid.ColumnSpan="2"
                                              VerticalAlignment="Center"
                                              Content="Show crosshairs for selected issues only"
                                              IsChecked="{Binding Settings.LayerPreview.CrosshairShowOnlyOnSelectedIssues}" />
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Crosshair size:" />

                                    <NumericUpDown Grid.Row="0"
                                                   Grid.Column="3"
                                                   Width="70"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Maximum="1000000"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.CrosshairLength}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Crosshair fade after:" />
                                    <ComboBox Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="10,0,0,0"
                                              VerticalAlignment="Center"
                                              ItemsSource="{Binding ZoomRanges}"
                                              SelectedIndex="{Binding Settings.LayerPreview.CrosshairFadeLevelIndex}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Text="Crosshair margin:" />

                                    <NumericUpDown Grid.Row="2"
                                                   Grid.Column="3"
                                                   Width="70"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Maximum="255"
                                                   Minimum="1"
                                                   Value="{Binding Settings.LayerPreview.CrosshairMargin}" />

                                </Grid>
                            </StackPanel>

                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="Miscellaneous">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox Content="Auto rotate on load"
                                              IsChecked="{Binding Settings.LayerPreview.AutoRotateLayerBestView}"
                                              ToolTip.Tip="Auto rotate the layer preview on file load for a landscape viewport." />

                                    <CheckBox Margin="10,0,10,0"
                                              Content="Auto flip on load"
                                              IsChecked="{Binding Settings.LayerPreview.AutoFlipLayerIfMirrored}"
                                              ToolTip.Tip="Auto flip the layer preview on file load if the file is marked to print mirrored on the printer LCD." />

                                    <CheckBox Content="Zoom to fit on load"
                                              IsChecked="{Binding Settings.LayerPreview.LayerZoomToFitOnLoad}" />

                                </StackPanel>

                                <CheckBox Content="Show square grid as background"
                                          IsChecked="{Binding Settings.LayerPreview.ShowBackgroudGrid}" />

                                <StackPanel Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown VerticalAlignment="Center"
                                                   Classes="ValueLabel ValueLabel_ms"
                                                   Increment="5"
                                                   Maximum="1000"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerPreview.LayerSliderDebounce}" />

                                    <TextBlock VerticalAlignment="Center"
                                               Text="Layer slider debounce time to render the image"
                                               ToolTip.Tip="Time to wait in milliseconds to render the layer image after navigating on the layer slider while dragging. &#x0a;The timer resets every time the slider changes value. &#x0a;Use this option when layer images are heavy to load and you can't get a smooth navigation on the slider while dragging. &#x0a;Use 0 to disable the delay and instant render the layer." />

                                </StackPanel>

                            </StackPanel>
                        </uvtava:GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem VerticalContentAlignment="Center"
                     Header="Issues">
                <Grid RowDefinitions="*">
                    <ScrollViewer Name="ScrollViewer2">
                        <StackPanel Orientation="Vertical">
                            <uvtava:GroupBox Margin="5"
                                             Header="Startup">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <Grid ColumnDefinitions="Auto,10,*"
                                          RowDefinitions="Auto">
                                        <TextBlock Grid.Row="0"
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Text="On file load:" />

                                        <ComboBox Grid.Row="0"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Stretch"
                                                  ItemsSource="{Binding Settings.Issues.ComputeIssuesOnFileLoad, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                                  SelectedItem="{Binding Settings.Issues.ComputeIssuesOnFileLoad, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                    </Grid>

                                    <CheckBox Content="Auto repair layers and issues on file load"
                                              IsChecked="{Binding Settings.Issues.AutoRepairIssuesOnLoad}"
                                              IsEnabled="{Binding Settings.Issues.ComputeIssuesOnFileLoad}" />

                                    <CheckBox Content="Auto compute issues when the Issues tab is opened for the first time"
                                              IsChecked="{Binding Settings.Issues.ComputeIssuesOnClickTab}" />

                                    <Grid ColumnDefinitions="Auto,10,Auto"
                                          RowDefinitions="Auto">
                                        <TextBlock Grid.Row="0"
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Text="Compute:" />
                                        <StackPanel Grid.Row="0"
                                                    Grid.Column="2"
                                                    Orientation="Vertical"
                                                    Spacing="10">

                                            <StackPanel Orientation="Horizontal"
                                                        Spacing="10">
                                                <CheckBox Content="Islands"
                                                          IsChecked="{Binding Settings.Issues.ComputeIslands}" />
                                                <CheckBox Content="Overhangs"
                                                          IsChecked="{Binding Settings.Issues.ComputeOverhangs}" />
                                                <CheckBox Content="Resin traps"
                                                          IsChecked="{Binding Settings.Issues.ComputeResinTraps}" />
                                                <CheckBox Content="Suction cups"
                                                          IsChecked="{Binding Settings.Issues.ComputeSuctionCups}"
                                                          IsEnabled="{Binding Settings.Issues.ComputeResinTraps}" />
                                                <CheckBox Content="Touching boundary"
                                                          IsChecked="{Binding Settings.Issues.ComputeTouchingBounds}" />
                                            </StackPanel>

                                            <StackPanel Orientation="Horizontal"
                                                        Spacing="10">
                                                <CheckBox Content="Print height"
                                                          IsChecked="{Binding Settings.Issues.ComputePrintHeight}" />

                                                <CheckBox Content="Empty layers"
                                                          IsChecked="{Binding Settings.Issues.ComputeEmptyLayers}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>

                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Issues list">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <Grid ColumnDefinitions="Auto,10,*"
                                          RowDefinitions="Auto,10,Auto">
                                        <TextBlock Grid.Row="0"
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Text="Order by:"
                                                   ToolTip.Tip="Sets the default order for the issue list" />

                                        <ComboBox Grid.Row="0"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Stretch"
                                                  ItemsSource="{Binding Settings.Issues.DataGridOrderBy, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                                  SelectedItem="{Binding Settings.Issues.DataGridOrderBy, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />


                                        <TextBlock Grid.Row="2"
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Text="Group by:"
                                                   ToolTip.Tip="Sets how to group issues on the list" />
                                        <StackPanel Grid.Row="2"
                                                    Grid.Column="2"
                                                    Orientation="Vertical"
                                                    Spacing="10">

                                            <StackPanel Orientation="Horizontal"
                                                        Spacing="10">
                                                <CheckBox Content="Type"
                                                          IsChecked="{Binding Settings.Issues.DataGridGroupByType}" />
                                                <CheckBox Content="Layer"
                                                          IsChecked="{Binding Settings.Issues.DataGridGroupByLayerIndex}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Islands (Unsupported pixels)">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">

                                    <CheckBox Content="Enhance island detection with a combined overhang check"
                                              IsChecked="{Binding Settings.Issues.IslandEnhancedDetection}"
                                              ToolTip.Tip="Combines the island and overhang detections for a better and more realistic detection, also to discard false-positives. (Slower) &#x0a;If enabled, and when a island is found, it will check for overhangs on that same island, if no overhang found then the island will be discarded and considered safe, otherwise it will flag as an island issue. &#x0a;Note: Overhangs settings will be used to configure the detection. Enabling Overhangs is not required for this procedure to work." />

                                    <CheckBox Content="Allow diagonal bonds during island detection"
                                              IsChecked="{Binding Settings.Issues.IslandAllowDiagonalBonds}"
                                              ToolTip.Tip="If enabled, components touching by even a single diagonal bond will be considered a single component for the purposes of island detection. &#x0a;Enabling this will result in faster island detection. but some potential islands with weak bonds to other components may not be detected." />


                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="254"
                                                       Minimum="0"
                                                       Value="{Binding Settings.Issues.IslandBinaryThreshold}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Pixel intensity threshold for island detection"
                                                   ToolTip.Tip="Pixels below this threshold will be considered black during island detection. &#x0a;Pixels equal to or above this threshold will be considered white during island detection. &#x0a;0 to disable." />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_px2"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.IslandRequiredAreaToProcessCheck}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Bounding area required for an object to be considered an island"
                                                   ToolTip.Tip="Objects with bounding area smaller than this value will not be considered an island even if unsupported." />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.IslandRequiredPixelBrightnessToProcessCheck}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Minimum pixel intensity to consider a pixel part of an island"
                                                   ToolTip.Tip="Pixels with an intensity below this threshold will not be considerd as part of an island." />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_times"
                                                       FormatString="F2"
                                                       Increment="0.05"
                                                       Maximum="0.95"
                                                       Minimum="0.05"
                                                       Value="{Binding Settings.Issues.IslandRequiredPixelsToSupportMultiplier}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Supporting safe pixels required over a multiplier on island pixels"
                                                   ToolTip.Tip="An island supported by at least it pixels multiplied by this value will always be considered supported. &#x0a;Formula: Supporting pixels >= Island pixels * this value" />
                                    </StackPanel>


                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="255"
                                                       Minimum="50"
                                                       Value="{Binding Settings.Issues.IslandRequiredPixelBrightnessToSupport}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Minimum intensity of a supporting pixel before it is considered safe"
                                                   ToolTip.Tip="Pixels below this threshold will not be considered when counting supporting pixels for an island." />
                                    </StackPanel>
                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Overhangs (Unsupported pixels that goes beyond a certain angle/threshold)">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <CheckBox Content="Include islands when detecting overhangs"
                                              IsChecked="{Binding Settings.Issues.OverhangIndependentFromIslands}"
                                              ToolTip.Tip="If enabled, overhangs will be computed everywhere, including on islands. An overhang on an island will always be detected and reported. (Faster) &#x0a;If disabled, islands are disregarded when computing overhangs. An overhang that is on an island will never be detected or reported.  (Slower) &#x0a;When island detection is disabled and overhang detection is enabled, overhangs will always be computed everywhere." />

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="2"
                                                       Value="{Binding Settings.Issues.OverhangErodeIterations}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Minimum overhang depth"
                                                   ToolTip.Tip="The number of pixels that an overhang can protrude from the previous layer before it is detected and reported as an overhang." />
                                    </StackPanel>

                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Resin traps (Trapped resin inside hollow objects)">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="254"
                                                       Minimum="0"
                                                       Value="{Binding Settings.Issues.ResinTrapBinaryThreshold}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Pixel intensity threshold for resin trap detection"
                                                   ToolTip.Tip="Pixels below this threshold will be considered black during resin trap detection. &#x0a;Pixels equal to or above this threshold will be considered white during resin trap detection. &#x0a;0 to disable." />

                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_px2"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.ResinTrapRequiredAreaToProcessCheck}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Bounding area required for an object to be processed during resin trap detection"
                                                   ToolTip.Tip="Objects with bounding area smaller than this value will not be processed during resin trip detection." />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.ResinTrapRequiredBlackPixelsToDrain}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Number of drain pixels required to disqualify a potential resin trap"
                                                   ToolTip.Tip="The drain pixel area required to consider a potential resin trap sufficiently drained (no longer a resin trap)." />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="150"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.ResinTrapMaximumPixelBrightnessToDrain}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Maximum pixel intensity for a pixel to be considered a drain pixel"
                                                   ToolTip.Tip="Pixels below this intensity threshold will not be counted when evaluating if a potential resin trap is sufficiently drained." />
                                    </StackPanel>
                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Suction cups (Hollow areas that lacks a venting hole to prevent suction and pressure)">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_px2"
                                                       Maximum="4294967295"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.SuctionCupRequiredAreaToConsider}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Bounding area required for an object to be processed during suction cup detection"
                                                   ToolTip.Tip="Objects with bounding area smaller than this value will not be processed during suction cup detection." />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_mm"
                                                       FormatString="F2"
                                                       Increment="0.05"
                                                       Maximum="4294967295"
                                                       Minimum="0.05"
                                                       Value="{Binding Settings.Issues.SuctionCupRequiredHeightToConsider}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Minimum height required for a suction cup detection to be reported"
                                                   ToolTip.Tip="Objects with a smaller height than this value will not be reported during suction cup detection." />
                                    </StackPanel>
                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Touching boundary (White pixels that nearly or touch the build plate edges)">

                                <StackPanel Orientation="Vertical">
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_sun"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.TouchingBoundMinimumPixelBrightness}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Minimum pixel intensity for a pixel to be considered a touching boundary"
                                                   ToolTip.Tip="Pixels below this values won't flag a issue when inside the dangerous boundary margin. &#x0a;Pixels equal or above this values will flag a issue when inside the dangerous boundary margin." />
                                    </StackPanel>


                                    <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,Auto"
                                          RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                                        <TextBlock Grid.Row="1"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="Margin" />

                                        <TextBlock Grid.Row="3"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="Margin" />

                                        <TextBlock Grid.Row="1"
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="Margin" />

                                        <TextBlock Grid.Row="3"
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="Margin" />

                                        <TextBlock Grid.Row="2"
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Text="Left " />
                                        <NumericUpDown Grid.Row="2"
                                                       Grid.Column="1"
                                                       Width="150"
                                                       Margin="0,0,5,0"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.TouchingBoundMarginLeft}" />


                                        <TextBlock Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,0,0,2"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Text="Top" />
                                        <NumericUpDown Grid.Row="1"
                                                       Grid.Column="2"
                                                       Width="150"
                                                       Margin="0,0,0,5"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.TouchingBoundMarginTop}" />

                                        <TextBlock Grid.Row="2"
                                                   Grid.Column="4"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Text=" Right" />
                                        <NumericUpDown Grid.Row="2"
                                                       Grid.Column="3"
                                                       Width="150"
                                                       Margin="5,0,0,0"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.TouchingBoundMarginRight}" />

                                        <TextBlock Grid.Row="4"
                                                   Grid.Column="2"
                                                   Margin="0,2,0,0"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Text="Bottom" />
                                        <NumericUpDown Grid.Row="3"
                                                       Grid.Column="2"
                                                       Width="150"
                                                       Margin="0,5,0,0"
                                                       Classes="ValueLabel ValueLabel_px"
                                                       Maximum="255"
                                                       Minimum="1"
                                                       Value="{Binding Settings.Issues.TouchingBoundMarginBottom}" />

                                        <CheckBox Grid.Row="2"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Content="Sync"
                                                  IsChecked="{Binding Settings.Issues.TouchingBoundSyncMargins}" />
                                    </Grid>
                                </StackPanel>
                            </uvtava:GroupBox>

                            <uvtava:GroupBox Margin="5"
                                             Header="Print height (Layers that surpass printer maximum height)">

                                <StackPanel Orientation="Vertical"
                                            Spacing="10">
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="10">
                                        <NumericUpDown Width="150"
                                                       Classes="ValueLabel ValueLabel_mm"
                                                       FormatString="F2"
                                                       Increment="0.1"
                                                       Maximum="50"
                                                       Minimum="-50"
                                                       Value="{Binding Settings.Issues.PrintHeightOffset}" />
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="Offset height from printer maximum Z height"
                                                   ToolTip.Tip="Layers height will be compared with printer maximum possible height + this offset, if a layer surpass this height, it will be marked as a issue. &#x0a;Use negative values if you want to give some down margin from top most. &#x0a;Note: Some file formats lacks of printer maximum height information, and in this cases the object final height will be used instead as printer maximum, in this cases use a Offset of 0 to not have false detected issues." />
                                    </StackPanel>
                                </StackPanel>
                            </uvtava:GroupBox>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>

            <TabItem VerticalContentAlignment="Center"
                     Header="Pixel editor">
                <ScrollViewer Name="ScrollViewer3">
                    <StackPanel Orientation="Vertical">
                        <uvtava:GroupBox Margin="5"
                                         Header="Colors &amp; highlights">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <Grid ColumnDefinitions="Auto,Auto,Auto"
                                      RowDefinitions="Auto,10,Auto,10,Auto,10,Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Pixel add operation / (Selected):" />

                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.AddPixelBrush}" />
                                    <ColorPicker Grid.Row="0"
                                                 Grid.Column="2"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.AddPixelHighlightBrush}" />


                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Pixel remove operation / (Selected):" />

                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.RemovePixelBrush}" />
                                    <ColorPicker Grid.Row="2"
                                                 Grid.Column="2"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.RemovePixelHighlightBrush}" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Support operation / (Selected):" />

                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.SupportsBrush}" />
                                    <ColorPicker Grid.Row="4"
                                                 Grid.Column="2"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.SupportsHighlightBrush}" />

                                    <TextBlock Grid.Row="6"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Drain hole operation / (Selected):" />

                                    <ColorPicker Grid.Row="6"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.DrainHoleBrush}" />
                                    <ColorPicker Grid.Row="6"
                                                 Grid.Column="2"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.DrainHoleHighlightBrush}" />

                                    <TextBlock Grid.Row="8"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Drawing cursor:" />

                                    <ColorPicker Grid.Row="8"
                                                 Grid.Column="1"
                                                 Margin="10,0,0,0"
                                                 Color="{Binding Settings.PixelEditor.CursorBrush}" />
                                </Grid>

                            </StackPanel>
                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="Actions">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <CheckBox Content="Refresh issues for modified layers"
                                          IsChecked="{Binding Settings.PixelEditor.PartialUpdateIslandsOnEditing}" />
                                <CheckBox Content="Close pixel editor after operations are applied"
                                          IsChecked="{Binding Settings.PixelEditor.CloseEditorOnApply}" />
                            </StackPanel>
                        </uvtava:GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem VerticalContentAlignment="Center"
                     Header="Layer repair">
                <ScrollViewer Name="ScrollViewer4">
                    <StackPanel Orientation="Vertical">
                        <uvtava:GroupBox Margin="5"
                                         Header="Default values">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <CheckBox Margin="10,0"
                                          Content="Attempt to repair islands by default"
                                          IsChecked="{Binding Settings.LayerRepair.RepairIslands}" />
                                <CheckBox Margin="10,0"
                                          Content="Attempt to repair resin traps by default"
                                          IsChecked="{Binding Settings.LayerRepair.RepairResinTraps}" />
                                <CheckBox Margin="10,0"
                                          Content="Attempt to repair suction cups by default"
                                          IsChecked="{Binding Settings.LayerRepair.RepairSuctionCups}" />
                                <CheckBox Margin="10,0"
                                          Content="Remove empty layers by default"
                                          IsChecked="{Binding Settings.LayerRepair.RemoveEmptyLayers}" />

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_px2"
                                                   Maximum="255"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.RemoveIslandsBelowEqualPixels}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Islands: Maximum pixel area for Island removal (0 = disable)" />
                                </StackPanel>

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_layers"
                                                   Maximum="65535"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.RemoveIslandsRecursiveIterations}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Islands: Maximum layers for recursive island removal (0 = All)" />
                                </StackPanel>

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_layers"
                                                   Maximum="65535"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.AttachIslandsBelowLayers}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Islands: Attempt to attach islands down to this layers (0 = Disabled)" />
                                </StackPanel>

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Maximum="255"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.ResinTrapsOverlapBy}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Resin traps: Overlap and expand resin trap area by this value in pixels (0 = Disabled)" />
                                </StackPanel>

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_px2"
                                                   Maximum="255"
                                                   Minimum="4"
                                                   Value="{Binding Settings.LayerRepair.SuctionCupsVentHole}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="Suction cups: Hole diameter to drill the layers with" />
                                </StackPanel>

                                <StackPanel Margin="10,0"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Maximum="255"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.ClosingIterations}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="'Gap Closing' iterations" />
                                </StackPanel>

                                <StackPanel Margin="10,0,10,10"
                                            Orientation="Horizontal"
                                            Spacing="10">
                                    <NumericUpDown Width="150"
                                                   Classes="ValueLabel ValueLabel_px"
                                                   Maximum="255"
                                                   Minimum="0"
                                                   Value="{Binding Settings.LayerRepair.OpeningIterations}" />
                                    <TextBlock VerticalAlignment="Center"
                                               Text="'Noise Removal' iterations" />
                                </StackPanel>

                            </StackPanel>
                        </uvtava:GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem VerticalContentAlignment="Center"
                     Header="Tools">
                <ScrollViewer Name="ScrollViewer5">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Common">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <CheckBox Content="Expand and show descriptions by default"
                                          IsChecked="{Binding Settings.Tools.ExpandDescriptions}"
                                          ToolTip.Tip="Disable this if you want to gain some vertical space for windows, you can still toggle the descriptions and read them if required." />

                                <CheckBox Content="Always prompt for confirmation before execute the operation"
                                          IsChecked="{Binding Settings.Tools.PromptForConfirmation}" />

                                <CheckBox Content="Keep and restore the last used settings on operations per user session/instance"
                                          IsChecked="{Binding Settings.Tools.RestoreLastUsedSettings}" />

                                <ToggleSwitch IsChecked="{Binding Settings.Tools.LastUsedSettingsKeepOnCloseFile}"
                                              OffContent="Discard the session when closing or loading files"
                                              OnContent="Keep the session when closing or loading files" />

                                <ToggleSwitch IsChecked="{Binding Settings.Tools.LastUsedSettingsPriorityOverDefaultProfile}"
                                              IsEnabled="{Binding Settings.Tools.RestoreLastUsedSettings}"
                                              OffContent="Default profile will priority over the session"
                                              OnContent="Session will priority over the default profile" />
                            </StackPanel>

                        </uvtava:GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem VerticalContentAlignment="Center"
                     Header="File formats">
                <ScrollViewer Name="ScrollViewer6">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Common">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">

                                <Grid ColumnDefinitions="Auto,*"
                                      ColumnSpacing="10"
                                      RowDefinitions="Auto,Auto"
                                      RowSpacing="10">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Per-layer settings:"
                                               ToolTip.Tip="Per-layer settings are known to cause unexpected printing problems in some file formats. Mostly despite the flag and feature exists, no slicer make use of it, so it's poor implemented by printer firmwares causing all sort of problems.&#10;By disabling on problematic files (Recommended), will ensure such formats to follow and print by the global settings.&#10;&#10;Known problematic file formats: &#10;- Anycubic&#10;- Goo&#10;- PHZ&#10;&#10;Note: This option does not apply to GCode nor intermediate file formats." />
                                    <ComboBox Grid.Row="0"
                                              Grid.Column="1"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.FileFormats.PerLayerSettingsMode, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.FileFormats.PerLayerSettingsMode, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />
                                </Grid>

                            </StackPanel>

                        </uvtava:GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem VerticalContentAlignment="Center"
                     Header="Automations">
                <ScrollViewer Name="ScrollViewer7">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Common">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <CheckBox Content="Automatically save the file after apply any automation(s)"
                                          IsChecked="{Binding Settings.Automations.SaveFileAfterModifications}" />
                                <ToggleSwitch IsChecked="{Binding Settings.Automations.FileNameOnlyAsciiCharacters}"
                                              OffContent="Allow all valid characters on the file name"
                                              OnContent="Restrict the file name to valid ASCII characters"
                                              ToolTip.Tip="Some printers can only show and print files with ASCII characters. Enabling this is recommended to ensure a proper and sane file name." />
                            </StackPanel>

                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5"
                                         Header="File conversion">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <CheckBox Content="Automatically convert SL1 and VDT files to the target format when possible and load it back"
                                          IsChecked="{Binding Settings.Automations.AutoConvertFiles}"
                                          ToolTip.Tip="1) Converts the SL1 files to the format specified on 'PrusaSlicer - Printer - Notes' on 'FILEFORMAT_XXX' variable. &#x0a;2) Converts the VDT files to the format specified on 'Voxeldance Tango - Printer settings - Notes' on 'FILEFORMAT_XXX' variable. &#x0a;A new file with same name but a new extension will be created and overwrite any previous file. &#x0a;After a successful conversion the new file will automatically load in instead of the loaded SL1 file." />

                                <Grid ColumnDefinitions="Auto,10,*"
                                      RowDefinitions="Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Remove source file after automatic conversion:" />
                                    <ComboBox Grid.Row="0"
                                              Grid.Column="2"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.Automations.RemoveSourceFileAfterAutoConversion, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.Automations.RemoveSourceFileAfterAutoConversion, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Remove source file after manual conversion:" />
                                    <ComboBox Grid.Row="2"
                                              Grid.Column="2"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.Automations.RemoveSourceFileAfterManualConversion, Converter={StaticResource EnumToCollectionConverter}, Mode=OneTime}"
                                              SelectedItem="{Binding Settings.Automations.RemoveSourceFileAfterManualConversion, Converter={StaticResource FromValueDescriptionToEnumConverter}}" />

                                </Grid>



                            </StackPanel>

                        </uvtava:GroupBox>

                        <uvtava:GroupBox Margin="5">
                            <uvtava:GroupBox.Header>
                                <StackPanel Orientation="Horizontal"
                                            Spacing="5">
                                    <TextBlock Text="Events" />
                                    <i:Icon Cursor="Help"
                                            ToolTip.Tip="Events are fired upon an action and execute a defined script. &#x0a;If the script is written with the UVtools scripting structure, it will run under an operation and within the Core context. &#x0a;Otherwise, if plain C# code is used, it will run under the Terminal and in the UI context."
                                            Value="fa-solid fa-circle-info" />
                                </StackPanel>
                            </uvtava:GroupBox.Header>

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">
                                <Grid ColumnDefinitions="Auto,10,*,Auto,Auto"
                                      RowDefinitions="Auto,10,Auto,10,Auto">
                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="After file load:"
                                               ToolTip.Tip="Trigger every time after a file has been loaded." />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.Automations.EventAfterFileLoadScriptFile}" />
                                    <Button Grid.Row="0"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-file-import"
                                            Command="{Binding AutomationsOpenFileField}"
                                            CommandParameter="EventAfterFileLoadScriptFile" />
                                    <Button Grid.Row="0"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding AutomationsClearField}"
                                            CommandParameter="EventAfterFileLoadScriptFile" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Before file save:"
                                               ToolTip.Tip="Trigger every time before a file save." />
                                    <TextBox Grid.Row="2"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.Automations.EventBeforeFileSaveScriptFile}" />
                                    <Button Grid.Row="2"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-file-import"
                                            Command="{Binding AutomationsOpenFileField}"
                                            CommandParameter="EventBeforeFileSaveScriptFile" />
                                    <Button Grid.Row="2"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding AutomationsClearField}"
                                            CommandParameter="EventBeforeFileSaveScriptFile" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="After file save:"
                                               ToolTip.Tip="Trigger every time after a file has been saved." />
                                    <TextBox Grid.Row="4"
                                             Grid.Column="2"
                                             IsReadOnly="True"
                                             Text="{Binding Settings.Automations.EventAfterFileSaveScriptFile}" />
                                    <Button Grid.Row="4"
                                            Grid.Column="3"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-file-import"
                                            Command="{Binding AutomationsOpenFileField}"
                                            CommandParameter="EventAfterFileSaveScriptFile" />
                                    <Button Grid.Row="4"
                                            Grid.Column="4"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"
                                            i:Attached.Icon="fa-solid fa-xmark"
                                            Command="{Binding AutomationsClearField}"
                                            CommandParameter="EventAfterFileSaveScriptFile" />

                                </Grid>



                            </StackPanel>

                        </uvtava:GroupBox>


                    </StackPanel>
                </ScrollViewer>
            </TabItem>


            <TabItem VerticalContentAlignment="Center"
                     Header="Network">
                <ScrollViewer Name="ScrollViewer8">
                    <StackPanel Orientation="Vertical"
                                Spacing="5">
                        <uvtava:GroupBox Margin="5"
                                         Header="Remote printers">

                            <StackPanel Orientation="Vertical"
                                        Spacing="10">

                                <Grid ColumnDefinitions="*,2,Auto"
                                      RowDefinitions="Auto">
                                    <ComboBox Name="NetworkRemotePrinterComboBox"
                                              Grid.Column="0"
                                              HorizontalAlignment="Stretch"
                                              ItemsSource="{Binding Settings.Network.RemotePrinters}" />

                                    <StackPanel Grid.Column="2"
                                                Orientation="Horizontal"
                                                Spacing="2">
                                        <Button VerticalAlignment="Stretch"
                                                i:Attached.Icon="fa-solid fa-plus"
                                                Command="{Binding AddNetworkRemotePrinter}" />
                                        <Button VerticalAlignment="Stretch"
                                                i:Attached.Icon="fa-solid fa-copy"
                                                Command="{Binding DuplicateSelectedNetworkRemotePrinter}"
                                                IsEnabled="{Binding #NetworkRemotePrinterComboBox.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}" />
                                        <Button VerticalAlignment="Stretch"
                                                i:Attached.Icon="fa-solid fa-trash-alt"
                                                Command="{Binding RemoveSelectedNetworkRemotePrinter}"
                                                IsEnabled="{Binding #NetworkRemotePrinterComboBox.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}" />
                                    </StackPanel>

                                </Grid>


                                <Grid ColumnDefinitions="Auto,10,200,30,Auto,10,150"
                                      IsVisible="{Binding #NetworkRemotePrinterComboBox.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"
                                      RowDefinitions="Auto,10,Auto,10,Auto,10,Auto">

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Status:" />

                                    <ToggleSwitch Grid.Row="0"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.IsEnabled}"
                                                  OffContent="Disabled"
                                                  OnContent="Enabled" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Name:" />

                                    <TextBox Grid.Row="2"
                                             Grid.Column="2"
                                             Grid.ColumnSpan="5"
                                             HorizontalAlignment="Stretch"
                                             VerticalAlignment="Center"
                                             Text="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.Name}" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Host:" />

                                    <TextBox Grid.Row="4"
                                             Grid.Column="2"
                                             HorizontalAlignment="Stretch"
                                             VerticalAlignment="Center"
                                             Text="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.Host}" />

                                    <TextBlock Grid.Row="4"
                                               Grid.Column="4"
                                               VerticalAlignment="Center"
                                               Text="Port:"
                                               ToolTip.Tip="Use 0 if not used" />

                                    <NumericUpDown Grid.Row="4"
                                                   Grid.Column="6"
                                                   Increment="1"
                                                   Maximum="65535"
                                                   Minimum="0"
                                                   Value="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.Port}" />

                                    <TextBlock Grid.Row="6"
                                               Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Text="Extensions:"
                                               ToolTip.Tip="Valid extensions for this device. &#x0a;Example: ctb;zip &#x0a;Empty to be compatible with every file format." />

                                    <TextBox Grid.Row="6"
                                             Grid.Column="2"
                                             Grid.ColumnSpan="5"
                                             HorizontalAlignment="Stretch"
                                             VerticalAlignment="Center"
                                             Text="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.CompatibleExtensions}" />
                                </Grid>

                                <DataGrid Name="NetworkRemotePrintersGrid"
                                          CanUserReorderColumns="True"
                                          CanUserResizeColumns="True"
                                          CanUserSortColumns="True"
                                          ClipboardCopyMode="IncludeHeader"
                                          GridLinesVisibility="Horizontal"
                                          IsReadOnly="False"
                                          ItemsSource="{ReflectionBinding #NetworkRemotePrinterComboBox.SelectedItem.Requests}"
                                          SelectionMode="Extended">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Width="Auto"
                                                            Binding="{ReflectionBinding Type}"
                                                            Header="Type"
                                                            IsReadOnly="True" />
                                        <DataGridTemplateColumn Width="130"
                                                                Header="Method"
                                                                IsReadOnly="False">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <ComboBox HorizontalAlignment="Stretch"
                                                              ItemsSource="{ReflectionBinding Method,
                                                                                              Converter={StaticResource EnumToCollectionConverter},
                                                                                              Mode=OneTime}"
                                                              SelectedItem="{ReflectionBinding Method,
                                                                                               Converter={StaticResource FromValueDescriptionToEnumConverter}}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn Width="*"
                                                            Binding="{ReflectionBinding Path}"
                                                            Header="Request path"
                                                            IsReadOnly="False" />
                                    </DataGrid.Columns>

                                </DataGrid>

                            </StackPanel>

                        </uvtava:GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>



        </TabControl>

        <Border Grid.Row="1"
                Classes="FooterActions">
            <Grid ColumnDefinitions="*,*"
                  RowDefinitions="Auto">

                <StackPanel Grid.Column="0"
                            Orientation="Horizontal">
                    <controls:ButtonWithIcon Padding="10"
                                             Command="{Binding OnClickResetAllDefaults}"
                                             Icon="fa-solid fa-undo-alt"
                                             Text="Reset all settings" />
                </StackPanel>

                <StackPanel Grid.Column="1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                    <controls:ButtonWithIcon Margin="0,0,10,0"
                                             Padding="10"
                                             Command="{Binding OnClickSave}"
                                             Icon="fa-solid fa-floppy-disk"
                                             IsDefault="True"
                                             Text="Save" />

                    <controls:ButtonWithIcon Padding="10"
                                             Command="{Binding Close}"
                                             Icon="fa-solid fa-sign-out-alt"
                                             IsCancel="True"
                                             Text="Cancel" />
                </StackPanel>
            </Grid>
        </Border>

    </Grid>

</controls:WindowEx>
